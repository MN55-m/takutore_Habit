{% extends 'base.html' %}

{% load custom_filters %}

{% block title %}ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼{% endblock %}

{% block extra_css %}
  {% load static %}
  <link rel="stylesheet" href="{% static 'app_calendar/styles_calendar.css' %}">
{% endblock %}

{% block content %}
<h2>ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½</h2>

<!-- æœˆç§»å‹•ãƒªãƒ³ã‚¯ -->
<div>
  <a href="?year={{ prev_month.year }}&month={{ prev_month.month }}">â—€ å‰æœˆ</a>
  <strong>{{ year }}å¹´{{ month }}æœˆ</strong>
  <a href="?year={{ next_month.year }}&month={{ next_month.month }}">ç¿Œæœˆ â–¶</a>
</div>

<!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ -->
<table border="1" style="width: 100%; text-align: center;">
  <tr>
    {% for day in days %}
      {% if forloop.counter0|divisibleby:7 %}
        </tr><tr>
      {% endif %}

      <td class="calendar-cell">
        <a href="{% url 'app_calendar:edit_day' year=day.year month=day.month day=day.day %}">
          <div>{{ day.day }}</div>
        </a>

        {% if day in record_map %}
          {% with records=record_map|dictkey:day %}
            {% for rec in records %}
              <div class="hover-wrapper">
                ğŸ˜Š<br>{{ rec.weight_record }}kg

                <div class="popup workout-table">
                  <table>
                    <thead>
                      <tr>
                        <th>Training No.</th>
                        <th>éƒ¨ä½</th>
                        <th>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç¨®åˆ¥</th>
                        <th>æ™‚é–“</th>
                        <th>å®…ãƒˆãƒ¬â˜…å‹•ç”»</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for menu in rec.workoutmenu_set.all %}
                        <tr>
                          <td>{{ forloop.counter }}</td>
                          <td>{{ menu.video.get_body_part_labels.0 }}</td>
                          <td>{{ menu.video.get_type_labels.0 }}</td>
                          <td>{{ menu.video.duration_time }}</td>
                          <td>
                            <iframe width="120" height="70" src="{{ menu.video.get_embed_url }}" frameborder="0" allowfullscreen></iframe>
                          </td>
                        </tr>
                      {% empty %}
                        <tr><td colspan="5">é‹å‹•ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            {% endfor %}
          {% endwith %}
        {% endif %}
      </td>
    {% endfor %}
  </tr>
</table>
{% endblock %}
